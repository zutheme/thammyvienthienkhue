function jscheckfile(t){var e=new Array(".xlsx",".xls",".csv",".doc",".docx",".pdf",".zip",".rar",".gz",".jpg",".png"),n=t.name;return n=n.substring(n.lastIndexOf(".")),e.indexOf(n)<0?(alert("File không hợp lệ, chỉ chấp nhận loại file "+e.toString()+" types."),!1):!(t.size>5e6)||(alert("dung lượng file không quá 5MB"),!1)}function performClick_icon(t,e){e.preventDefault();var n=document.getElementById(t);if(n&&document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),n.dispatchEvent(a)}}function performClick_Class(t,e){e.preventDefault();var n=document.getElementsByClassName(t)[0];if(n&&document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),n.dispatchEvent(a)}}!function(t){"use strict";t("a.attach_comment").click(function(){performClick_Class("file-attach-comment",event);var e=t(this).parent(),n=e.find("input[name='user-login']").val(),a=e.find("input[name='author-post']").val(),i=e.find("input[name='idpost']").val();e.find('input[type="file"]').change(function(r){var o=r.target.files[0];if(!jscheckfile(o))return!1;var p=new FormData;return p.append("action","receive_files"),p.append("_attach_comment",o),p.append("idpost",i),p.append("user_login",n),p.append("author_post",a),e.find("img.htz-attach-comment-loading").show(),t.ajax({type:"POST",url:MyAjax.ajaxurl,data:p,contentType:!1,processData:!1,success:function(t){console.log(t);var n=jQuery.parseJSON(t),a=n.error,i=n.idfile;return e.find("img.htz-attach-comment-loading").hide(),""==a?(e.find("input[name='idfile']").val(i),e.find("span.htz-attach-comment-result").html("")):e.find("span.htz-attach-comment-result").html(a),!1},error:function(t){alert("There was an error uploading your file!")}}),!1})}),t("a.repply").click(function(e){e.preventDefault();var n=t(this).parent().parent().parent(),a=n.find("textarea[name='text-comment']").val(),i=n.find("input[name='user-login']").val(),r=n.find("input[name='author-post']").val(),o=n.find("input[name='idpost']").val(),p=n.find("input[name='idfile']").val(),l=new FormData;return l.append("action","sendto"),l.append("idpost",o),l.append("user_login",i),l.append("author_post",r),l.append("idfile",p),l.append("comment",a),n.find("img.htz-repply-comment-loading").show(),t.ajax({type:"POST",url:MyAjax.ajaxurl,data:l,contentType:!1,processData:!1,success:function(t){console.log(t);var e=jQuery.parseJSON(t),a=e.error;e.sql;return n.find("img.htz-repply-comment-loading").hide(),""==a?(n.find("span.htz-repply-comment-result").html(""),setTimeout(function(){location.reload()},1e3)):n.find("span.htz-repply-comment-result").html(a),!1},error:function(t){console.log(t)}}),!1})}(jQuery),function(t){"use strict";t("a.attach-post").click(function(){performClick_Class("file-attach-post",event);var e=t(this).parent(),n=e.find("input[name='user-login']").val(),a=e.find("input[name='author-post']").val(),i=e.find("input[name='idpost-attach']").val();e.find('input[type="file"]').change(function(r){var o=r.target.files[0];if(!jscheckfile(o))return!1;var p=new FormData;return p.append("action","attach_files"),p.append("_attach_post",o),p.append("idpost",i),p.append("user_login",n),p.append("author_post",a),e.find("img.htz-attach-post-loading").show(),t.ajax({type:"POST",url:MyAjax.ajaxurl,data:p,contentType:!1,processData:!1,success:function(t){console.log(t);var n=jQuery.parseJSON(t),a=n.error,i=n.idfile;return e.find("img.htz-attach-post-loading").hide(),""==a?(e.find("input[name='idfile-post']").val(i),e.find("span.htz-attach-post-result").html(""),setTimeout(function(){location.reload()},1e3)):e.find("span.htz-attach-post-result").html(a),!1},error:function(t){alert("There was an error uploading your file!")}}),!1})})}(jQuery);